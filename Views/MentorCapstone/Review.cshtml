@model SPT.Models.Capstone
@using SPT.Models

@{
    ViewData["Title"] = "Review Capstone";
}

<div class="container mt-4">
    <h2 class="mb-4">
        <i class="fas fa-project-diagram text-primary"></i>
        Review Capstone
    </h2>

    <div class="card shadow-sm mb-4 leaderboard-card">
        <div class="card-body">
            <h5 class="fw-bold">@Model.Title</h5>
            <p class="text-muted">@Model.Description</p>

            <p class="mt-3">
                <strong>Student:</strong> @Model.Student.FullName<br />
                <strong>Cohort:</strong> @Model.Student.Cohort?.Name<br />
                <strong>Submitted:</strong> @Model.SubmittedAt.ToString("MMM dd, yyyy")
            </p>

            @if (!string.IsNullOrEmpty(Model.RepositoryUrl))
            {
                <p>
                    <a href="@Model.RepositoryUrl" target="_blank">
                        <i class="fab fa-github"></i> GitHub Repository
                    </a>
                </p>
            }

            @if (!string.IsNullOrEmpty(Model.LiveDemoUrl))
            {
                <p>
                    <a href="@Model.LiveDemoUrl" target="_blank">
                        <i class="fas fa-globe"></i> Live Demo
                    </a>
                </p>
            }
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-body">
            <form asp-action="Review" method="post">
                <input type="hidden" name="id" value="@Model.Id" />

                <div class="mb-3">
                    <label class="form-label fw-bold">Review Decision</label>

                    <select name="status" class="form-select" required>
                        <option value="">-- Select --</option>

                        <option value="Approved"
                                selected="@(Model.Status == CapstoneStatus.Approved)">
                            ✅ Approve
                        </option>

                        <option value="Rejected"
                                selected="@(Model.Status == CapstoneStatus.Rejected)">
                            ❌ Reject
                        </option>
                    </select>
                </div>


                <div class="mb-3">
                    <label class="form-label fw-bold">Mentor Feedback</label>
                    <textarea name="mentorFeedback"
                              class="form-control"
                              rows="4"
                              required>@Model.MentorFeedback</textarea>
                </div>

                <div class="d-flex justify-content-between">
                    <a asp-action="Index" class="btn btn-outline-secondary">
                        ← Back
                    </a>

                    <button type="submit" class="btn btn-primary">
                        Save Review
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
