@model SPT.Models.Capstone
@using SPT.Models

@{
    ViewData["Title"] = "My Capstone Project";
}

<div class="container mt-4">
    <h2 class="mb-4">
        <i class="fas fa-project-diagram text-primary"></i>
        Capstone Project
    </h2>

    @* ========================= *@
    @* NO CAPSTONE SUBMITTED YET *@
    @* ========================= *@
    @if (Model == null)
    {
        <div class="alert alert-info">
            <strong>No capstone submitted yet.</strong><br />
            Submit your final project after completing all modules.
        </div>

        <a asp-action="Create" class="btn btn-primary">
            <i class="fas fa-plus"></i> Submit Capstone
        </a>

        return;
    }

    @* ========================= *@
    @* CAPSTONE EXISTS *@
    @* ========================= *@

    <div class="card shadow-sm">
        <div class="card-body">

            <h5 class="fw-bold">@Model.Title</h5>
            <p class="text-muted">@Model.Description</p>

            <hr />

            <p>
                <strong>Status:</strong>
                <span class="badge
                    @(Model.Status == CapstoneStatus.Approved ? "bg-success" :
                      Model.Status == CapstoneStatus.Rejected ? "bg-danger" :
                      "bg-warning fw-bold")">
                    @Model.Status
                </span>
            </p>

            @if (!string.IsNullOrEmpty(Model.RepositoryUrl))
            {
                <p>
                    <a href="@Model.RepositoryUrl" target="_blank">
                        <i class="fab fa-github"></i> GitHub Repository
                    </a>
                </p>
            }

            @if (!string.IsNullOrEmpty(Model.LiveDemoUrl))
            {
                <p>
                    <a href="@Model.LiveDemoUrl" target="_blank">
                        <i class="fas fa-globe"></i> Live Demo
                    </a>
                </p>
            }

            @if (Model.Status == CapstoneStatus.Approved)
            {
                <div class="alert alert-success mt-3">
                    <strong>Approved!</strong><br />
                    @Model.MentorFeedback
                </div>
            }
            else if (Model.Status == CapstoneStatus.Rejected)
            {
                <div class="alert alert-danger mt-3">
                    <strong>Rejected</strong><br />
                    @Model.MentorFeedback
                </div>

                <a asp-action="Edit" asp-route-id="@Model.Id"
                   class="btn btn-warning mt-2">
                    Resubmit Capstone
                </a>
            }
            else
            {
                <div class="alert alert-warning mt-3">
                    Awaiting mentor review.
                </div>
            }
        </div>
    </div>
</div>
